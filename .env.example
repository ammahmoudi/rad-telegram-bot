# ============================================================================
# RASTAR TELEGRAM BOT - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your values
# Generate secrets with: openssl rand -hex 32

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================
# Set to 'production' when deploying with Docker
NODE_ENV=development

# Domain/URL Configuration (Update these for your deployment)
# Base domain for all services (used in production)
BASE_DOMAIN=your-domain.com

# Public URLs for each service (set these to your actual domains)
ADMIN_PANEL_URL=http://localhost:3000
LINK_PORTAL_URL=http://localhost:3002
MCP_PLANKA_URL=http://localhost:3100
MCP_RASTAR_URL=http://localhost:3101

# ============================================================================
# TELEGRAM BOT CONFIGURATION
# ============================================================================
# Get your bot token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=

# Optional: Telegram bot username (used for @mentions)
TELEGRAM_BOT_USERNAME=

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# SQLite database path (for development)
DATABASE_PATH=./data/rastar.db

# Database URL (for production with Docker)
# SQLite: file:/app/data/rastar.db
# PostgreSQL: postgresql://user:password@postgres:5432/rastar
DATABASE_URL=file:./data/rastar.db

# ============================================================================
# SECURITY & ENCRYPTION
# ============================================================================
# Encryption key for storing sensitive user data (tokens, passwords)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=

# NextAuth secret for admin panel authentication
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=

# Admin panel URL (for NextAuth callbacks)
NEXTAUTH_URL=http://localhost:3000

# Admin panel credentials
ADMIN_USERNAME=admin
ADMIN_PASSWORD=

# ============================================================================
# AI CONFIGURATION (OpenRouter)
# ============================================================================
# OpenRouter API key for AI chat functionality
# Get your key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=

# Default AI model for chat
# Popular options:
#   - anthropic/claude-3.5-sonnet (recommended, best for reasoning)
#   - openai/gpt-4o (very capable, multimodal)
#   - google/gemini-flash-1.5 (fast and cost-effective)
#   - meta-llama/llama-3.1-70b-instruct (open source)
# See all models: https://openrouter.ai/models
DEFAULT_AI_MODEL=anthropic/claude-3.5-sonnet

# ============================================================================
# MCP SERVER CONFIGURATION
# ============================================================================
# Transport mode for MCP servers (http or stdio)
# In production with Docker, this is automatically set to 'http'
MCP_TRANSPORT=stdio

# MCP Server Ports (only needed if running standalone)
MCP_PLANKA_PORT=3100
MCP_RASTAR_PORT=3101

# ============================================================================
# PLANKA INTEGRATION (via MCP)
# ============================================================================
# Planka server URL (your Planka instance)
PLANKA_SERVER_URL=https://planka.your-domain.com

# Note: User-specific Planka tokens are stored in the database
# Users will authenticate via the Telegram bot using /link_planka

# ============================================================================
# RASTAR API INTEGRATION (via MCP)
# ============================================================================
# Rastar API base URL
RASTAR_API_URL=https://api.rastar.com

# Rastar API credentials (system-level)
RASTAR_USERNAME=
RASTAR_PASSWORD=

# ============================================================================
# SERVICE PORTS (for Docker deployment)
# ============================================================================
# These can be changed if you have port conflicts
TELEGRAM_BOT_PORT=3001
LINK_PORTAL_PORT=3002
ADMIN_PANEL_PORT=3000

# ============================================================================
# OPTIONAL: EXTERNAL DATABASE (PostgreSQL)
# ============================================================================
# Uncomment and configure if migrating from SQLite to PostgreSQL
# POSTGRES_HOST=postgres
# POSTGRES_PORT=5432
# POSTGRES_DB=rastar
# POSTGRES_USER=rastar_user
# POSTGRES_PASSWORD=
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ============================================================================
# OPTIONAL: REVERSE PROXY / SSL
# ============================================================================
# If using a reverse proxy (Nginx, Caddy, Traefik)
# USE_SSL=true
# SSL_CERT_PATH=/etc/ssl/certs/cert.pem
# SSL_KEY_PATH=/etc/ssl/private/key.pem

# ============================================================================
# OPTIONAL: MONITORING & LOGGING
# ============================================================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Enable detailed logging
DEBUG=false

# ============================================================================
# OPTIONAL: RATE LIMITING
# ============================================================================
# Rate limit for API endpoints (requests per minute)
RATE_LIMIT_PER_MINUTE=60

# ============================================================================
# DOCKER-SPECIFIC (automatically set in containers)
# ============================================================================
# These are set automatically by docker-compose.yml, no need to configure
# - PORT (for each service)
# - NEXT_TELEMETRY_DISABLED=1

THIRD_PARTY_API_KEY_HEADER=apikey
THIRD_PARTY_API_KEY_BEARER_FOR_AUTH=False

# ============================================================================
# Database & Security
# ============================================================================
